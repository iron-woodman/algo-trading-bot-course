# History Loader - Bybit OHLCV

Проект для автоматизированной выгрузки исторических данных (свечей) с биржи Bybit с последующей проверкой их целостности.

## Особенности
- Выгрузка исторических данных OHLCV через API Bybit.
- Автоматический поиск подходящих торговых пар (ETH/USDT, ETH/USD).
- Выявление пропусков в данных и дубликатов по времени.
- Сохранение результатов в формате CSV.
- Утилита для проверки готовых CSV-файлов.

## Технические детали
- **Биржа:** Bybit.
- **API Endpoint:** `https://api.bybit.com/v5/market/kline` (используется через библиотеку `ccxt`).
- **Поддерживаемые таймфреймы:**
  - Минуты: `1m`, `3m`, `5m`, `15m`, `30m`
  - Часы: `1h`, `2h`, `4h`, `6h`, `12h`
  - Дни: `1d`, `1w`, `1M`

## Установка и настройка
1. Создайте виртуальное окружение и установите зависимости:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # или .venv\Scripts\activate на Windows
   pip install ccxt pandas numpy
   ```
2. Настройте конфигурацию:
   Скопируйте `.env.example` в `.env` и при необходимости укажите ключи API.

## Использование

### Загрузка данных
Для запуска основной выгрузки используйте `main.py`:
```bash
python main.py
```
Параметры года, символа и таймфрейма настраиваются внутри `main.py`.

### Проверка существующих файлов
Для анализа уже загруженного CSV-файла используйте `check_csv.py`:
```bash
python check_csv.py <путь_к_файлу> <таймфрейм>
```
Пример:
```bash
python check_csv.py data/ETH_USDT_5m_2025.csv 5m
```

## Структура проекта
- `main.py` — основной скрипт выгрузки.
- `ohlc_data_checker.py` — модуль для анализа пропусков и дубликатов.
- `check_csv.py` — утилита для проверки файлов.
- `GEMINI.md` — правила оформления кода проекта.
